<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIngelExt ‚Äî Options</title>
  <style>
    :root{--bg:#fff;--fg:#111;--muted:#555;--border:rgba(0,0,0,.14);--accent:#1b75ff;}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;margin:0;padding:18px;max-width:980px;background:var(--bg);color:var(--fg);}
    h1{font-size:18px;margin:0 0 6px;}
    .muted{color:var(--muted);font-size:12px;line-height:1.45;}
    .card{border:1px solid var(--border);border-radius:16px;padding:14px;margin:12px 0;background:#fff;}
    .card h2{font-size:14px;margin:0 0 8px;}
    label{display:flex;align-items:flex-start;gap:10px;margin:10px 0;font-size:14px;font-weight:750;}
    label .desc{font-weight:550;color:var(--muted);font-size:12px;line-height:1.4;margin-top:2px;}
    select,input[type="number"]{padding:10px 12px;border-radius:14px;border:1px solid var(--border);font-size:14px;}
    button{padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:750;}
    button:hover{background:rgba(0,0,0,.03);}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    details{border:1px solid var(--border);border-radius:16px;padding:12px}
    summary{cursor:pointer;font-weight:800}
    .ok{color:#0a7}
    code{background:rgba(0,0,0,.06);padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
  <h1>AIngelExt ‚Äî Options</h1>
  <div class="muted">v0.4.7 ‚Ä¢ Local-first ‚Ä¢ No network calls</div>

  <div class="card">
    <h2>Quick setup (recommended)</h2>
    <div class="muted">
      Do this, then do this, then do that:
      <b>1)</b> keep Input Gate ON,
      <b>2)</b> keep Auto-trigger ON (so it catches paste),
      <b>3)</b> keep Anti prompt‚Äëinjection ON (wraps pasted text as untrusted data).
    </div>
  </div>

  <div class="card">
    <h2>Main switches</h2>

    <label>
      <input id="enableInputGate" type="checkbox">
      <div>
        üõ°Ô∏è Input Gate
        <div class="desc">Stops you before you paste sensitive data into ChatGPT/Claude/search. Shows simple ‚ÄúFix ‚Üí Paste‚Äù steps.</div>
      </div>
    </label>

    <label style="font-weight:700">
      <input id="autoTriggerInputGate" type="checkbox">
      <div>
        Auto-trigger on paste
        <div class="desc">Recommended. Opens the Input Gate automatically when you paste risky text.</div>
      </div>
    </label>

    <label>
      <input id="promptInjectionGuard" type="checkbox">
      <div>
        üß± Anti prompt‚Äëinjection wrapper
        <div class="desc">Recommended for long text. Wraps pasted blocks as UNTRUSTED data so the AI treats them as data, not instructions.</div>
      </div>
    </label>

    <label>
      <input id="enableFileUploadGate" type="checkbox">
      <div>
        üìé File Upload Gate
        <div class="desc">Warns before uploading text files that may contain secrets. Can upload a redacted copy.</div>
      </div>
    </label>

    <label>
      <input id="enableOutputGate" type="checkbox">
      <div>
        üì§ Gmail Send Gate
        <div class="desc">Adds a quick ‚Äúare you sure?‚Äù + verification checklist before sending in Gmail Web.</div>
      </div>
    </label>

    <label>
      <input id="enableActionGate" type="checkbox">
      <div>
        ‚ö†Ô∏è Action Gate
        <div class="desc">Adds a confirmation step before irreversible actions (to avoid ‚Äúoops clicks‚Äù).</div>
      </div>
    </label>
  </div>

  <details class="card">
    <summary>Advanced (optional)</summary>

    <div style="margin-top:10px">
      <label style="font-weight:700">
        <input id="autoTriggerInputGateOnType" type="checkbox">
        <div>
          Auto-trigger on typing
          <div class="desc">Opens Input Gate after a short pause if risky content is being typed (more interruptions).</div>
        </div>
      </label>

      <div class="row" style="margin:10px 0 0">
        <div>
          <div class="muted">Auto-redact default (inside Input Gate)</div>
          <select id="autoRedactDefault">
            <option value="off">off</option>
            <option value="light">Redact</option>
            <option value="strict">Redact+</option>
          </select>
        </div>

        <div>
          <div class="muted">Redaction style</div>
          <select id="redactStyle">
            <option value="tag">tags ([EMAIL], [IBAN], ...)</option>
            <option value="mask">mask (keep last 4 where possible)</option>
          </select>
        </div>
      </div>

      <label style="font-weight:700">
        <input id="guardWrapWithoutModal" type="checkbox">
        <div>
          If no sensitive data: silently wrap+paste
          <div class="desc">When only anti prompt‚Äëinjection is enabled, wrap and paste without opening the modal.</div>
        </div>
      </label>

      <label>
        <input id="enableReasoningGate" type="checkbox">
        <div>
          üß† Reasoning Gate (on copy)
          <div class="desc">Adds a lightweight ‚Äúlabel what this is‚Äù step before you copy AI output.</div>
        </div>
      </label>

      <div class="row" style="margin-top:10px">
        <div>
          <div class="muted">Max inspect size (KB)</div>
          <input id="maxTextFileKB" type="number" min="16" max="10240" step="16">
        </div>
        <div>
          <div class="muted">Trace line</div>
          <select id="traceLineMode">
            <option value="store">store</option>
            <option value="append">append</option>
            <option value="off">off</option>
          </select>
        </div>
      </div>

      <div style="margin-top:10px">
        <label>
          <input id="logEnabled" type="checkbox">
          <div>
            Keep local log
            <div class="desc">Stores recent gate events locally on this device (never uploaded).</div>
          </div>
        </label>

        <div class="row">
          <div>
            <div class="muted">Max entries</div>
            <input id="maxLogEntries" type="number" min="0" max="5000" step="10">
          </div>
          <button id="clearLog">Clear log</button>
        </div>
      </div>

      <div class="muted" style="margin-top:10px">
        Tip: if a page doesn‚Äôt show the gate, check extension ‚ÄúSite access‚Äù and reload the tab.
      </div>
    </div>
  </details>

  <div class="row">
    <button id="save">Save</button>
    <span id="status" class="muted"></span>
  </div>

  <script src="options.js"></script>
</body>
</html>
