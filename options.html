<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIngelExt ‚Äî Options</title>
  <style>
    :root{--bg:#fff;--fg:#111;--muted:#555;--border:rgba(0,0,0,.14);}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;margin:0;padding:18px;max-width:980px;background:var(--bg);color:var(--fg);}
    h1{font-size:18px;margin:0 0 6px;}
    .muted{color:var(--muted);font-size:12px;line-height:1.35;}
    .card{border:1px solid var(--border);border-radius:16px;padding:14px;margin:12px 0;background:#fff;}
    label{display:flex;align-items:center;gap:10px;margin:10px 0;font-size:14px;font-weight:650;}
    select,input[type="number"]{padding:10px 12px;border-radius:14px;border:1px solid var(--border);font-size:14px;}
    button{padding:10px 12px;border-radius:14px;border:1px solid var(--border);background:#fff;cursor:pointer;font-weight:650;}
    button:hover{background:rgba(0,0,0,.03);}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .ok{color:#0a7}
  </style>
</head>
<body>
  <h1>AIngelExt ‚Äî Options</h1>
  <div class="muted">v0.4.3 ‚Ä¢ Local-first ‚Ä¢ No network calls</div>

  <div class="card">
    <div class="row">
      <div>
        <div class="muted">Detection level</div>
        <select id="mode">
          <option value="low">Low (fewest interruptions)</option>
          <option value="medium">Medium (recommended)</option>
          <option value="high">High (most sensitive)</option>
        </select>
      </div>
      <label><input id="autoEscalate" type="checkbox"> Auto-escalate on risk signals</label>
    </div>
  </div>

  <div class="card">
    <label><input id="enableInputGate" type="checkbox"> üõ°Ô∏è Input Gate</label>
    <label style="font-weight:550"><input id="autoTriggerInputGate" type="checkbox"> Auto-trigger on paste</label>
    <label style="font-weight:550"><input id="autoTriggerInputGateOnType" type="checkbox"> Auto-trigger on typing (after short pause)</label>

    <div class="row">
      <div>
        <div class="muted">Auto-redact default (inside the popup)</div>
        <select id="autoRedactDefault">
          <option value="off">off</option>
          <option value="light">light</option>
          <option value="strict">strict</option>
        </select>
      </div>

      <div>
        <div class="muted">Redaction style</div>
        <select id="redactStyle">
          <option value="tag">tags ([EMAIL], [IBAN], ...)</option>
          <option value="mask">mask (keep last 4 where possible)</option>
        </select>
      </div>
    </div>
  </div>

  <div class="card">
    <label><input id="promptInjectionGuard" type="checkbox"> üß± Wrap pasted content as data (anti prompt-injection)</label>
    <label style="font-weight:550"><input id="guardWrapWithoutModal" type="checkbox"> If no sensitive data: silently wrap+paste</label>
  </div>

  <div class="card">
    <label><input id="enableReasoningGate" type="checkbox"> üß† Reasoning Gate (on copy)</label>
    <label><input id="enableOutputGate" type="checkbox"> üì§ Output Gate (Gmail Send)</label>
    <label><input id="enableActionGate" type="checkbox"> ‚ö†Ô∏è Action Gate (irreversible clicks)</label>
  </div>

  <div class="card">
    <label><input id="enableFileUploadGate" type="checkbox"> üìé File Upload Gate</label>
    <div class="row">
      <div>
        <div class="muted">Max inspect size (KB)</div>
        <input id="maxTextFileKB" type="number" min="16" max="10240" step="16">
      </div>
      <div>
        <div class="muted">Trace line</div>
        <select id="traceLineMode">
          <option value="store">store</option>
          <option value="append">append</option>
          <option value="off">off</option>
        </select>
      </div>
    </div>
  </div>

  <div class="card">
    <label><input id="logEnabled" type="checkbox"> Keep local log</label>
    <div class="row">
      <div>
        <div class="muted">Max entries</div>
        <input id="maxLogEntries" type="number" min="0" max="5000" step="10">
      </div>
      <button id="clearLog">Clear log</button>
    </div>
  </div>

  <div class="row">
    <button id="save">Save</button>
    <span id="status" class="muted"></span>
  </div>

  <script src="options.js"></script>
</body>
</html>
